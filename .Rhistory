plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank())+
geom_sf()+
coord_sf(crs = 26986)+
+ scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank())+
geom_sf()+
coord_sf(crs = 26986)+
scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.5, "lines"),panel.spacing.y=unit(1, "lines"))+
geom_sf()+
coord_sf(crs = 26986)+
scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"))+
geom_sf()+
coord_sf(crs = 26986)+
scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
library(viridis)
plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
geom_sf()+
coord_sf(crs = 26986)+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
View(b)
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
library(knitr)
knit2html("2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd")
knit2html("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd")
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
#ggplotly(plt2)
plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
#ggplotly(plt2)
plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 2)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
#ggplotly(plt2)
plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 3)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
#ggplotly(plt2)
plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 3)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 3)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 3)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 3)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 3)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
#install.packages("tidycensus")
library(tigris)
library(tidyverse)
library(plotly)
options(tigris_use_cache = TRUE)
Sys.getenv("CENSUS_API_KEY")
br_vulns <- read_csv("../../data/brookline_vulnerabilities.csv")
g <- block_groups(state = "25", county = "021")
b <- st_as_sf(geo_join(g, br_vulns, 'GEOID', 'GEOID10',  how="inner"))
#library(viridis)
#
#plt1 <- ggplot(data = b, aes(fill=Education, color=Education))+
#  geom_sf()+
#  coord_sf(crs = 26986)+
#  scale_fill_viridis(option = "magma")+
#  scale_color_viridis(option = "magma")
#ggplotly(plt1)
# tidying data to create gridded map
vulns <- b %>% gather(key = "factor", value = "Percent", c("poverty_percent", "Education", "race_otherwhite", "GT65_ALN_HSHLD", "HSHLD_alone", "gt_65_percent"))
plt2 <- ggplot(data = vulns, aes(fill=Percent, color=Percent))+
facet_wrap(facets = "factor", ncol = 3)+
theme_bw()+
theme(panel.border = element_blank(), axis.text = element_blank(), axis.ticks = element_blank(),
panel.spacing.x=unit(0.05, "lines"),panel.spacing.y=unit(.01, "lines"),
plot.margin = unit(c(.1,.1,.1,.1), "cm"))+
geom_sf()+
coord_sf(crs = 26986)+
#scale_y_continuous(expand = c(0,0)) + scale_x_continuous(expand = c(0,0))+
scale_fill_viridis(option = "magma")+
scale_color_viridis(option = "magma")
ggplotly(plt2)
#plt2
rmarkdown::render("/Users/babak.jfard/BabaksPage/content/post/2018-08-05-heatwave-in-the-town-of-brookline-ma.Rmd", output_format = "html_document")
?round
View(br_vulns)
View(vulns)
View(br_vulns)
View(b)
"25021400 | 25021401"
